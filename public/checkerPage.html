<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory Checker</title>
    <script
      src="https://kit.fontawesome.com/c90dcd5d26.js"
      crossorigin="anonymous"
    ></script>

    <link rel="stylesheet" href="styles/checkerPage.css" />
    <script src="./scripts/components/sidebar.js" defer></script>
    <script type="module" src="./scripts/components/header.js" defer></script>

    <script type="module" src="./scripts/checkerPage.js" defer></script>
  </head>
  <body>
    <header class="header">
      <div class="logo-container">
        <img id="logo" src="./assets/logo.png" alt="Logo" class="logo" />
        <p>DA Constance Fluff 'N Stuff Pet Supplies Store</p>
      </div>

      <ul class="header-icons">
        <li class="user-info">
          <span id="header-name"></span>
          <span id="header-role"></span>
        </li>
        <li class="profile">
          <i class="fa-regular fa-user"></i>
        </li>
        <li class="about-us">
          <a href="/about-us">
            <span class="nav-label">About Us</span>
          </a>
        </li>
      </ul>
    </header>

    <nav class="sidebar">
      <ul class="nav-icons">
        <li>
          <a href="/inventory" class="inventory"
            ><i class="fa-solid fa-boxes-stacked"></i
            ><span class="nav-label hidden">Inventory</span></a
          >
        </li>
        <li>
          <a href="/supplies" class="order"
            ><i class="fa-solid fa-truck"></i
            ><span class="nav-label hidden">Manage Order</span></a
          >
        </li>
      </ul>
      <ul class="control-icons">
        <li class="expand">
          <i class="fa-solid fa-left-right"></i
          ><span class="nav-label hidden">Expand</span>
        </li>
        <li class="log-out">
          <a href="/logout">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
            <span class="nav-label hidden">Logout</span>
          </a>
        </li>
      </ul>
    </nav>

    <main>
      <div class="container">
        <h1>Inventory Management</h1>

        <div class="inventory-actions">
          <button
            id="manage-category"
            onclick="window.location.href='/category'"
          >
            <i class="fa-solid fa-tags"></i> Manage Categories
          </button>
          <button class="order-btn">Order</button>
        </div>

        <!-- Filters -->
        <div class="inventory-filters">
          <input
            type="text"
            id="search-input"
            placeholder="Search Product Name/SKU"
          />
          <select id="supplier-filter">
            <option value="">All Suppliers</option>
            <!-- Supplier options will be dynamically populated -->
          </select>
          <button id="apply-filters">
            <i class="fa-solid fa-filter"></i> Filter
          </button>
          <button id="reset-filters">
            <i class="fa-solid fa-rotate-left"></i> Reset
          </button>
        </div>

        <section class="inventory-table">
          <table>
            <thead>
              <tr>
                <th>Image</th>
                <th id="sort-sku" class="sortable">
                  SKU <span class="sort-icon" data-key="sku">▲▼</span>
                </th>
                <th id="sort-name" class="sortable">
                  Product Name <span class="sort-icon" data-key="name">▲▼</span>
                </th>
                <th id="sort-category" class="sortable">
                  Category <span class="sort-icon" data-key="category">▲▼</span>
                </th>
                <th id="sort-price" class="sortable">
                  Price <span class="sort-icon" data-key="price">▲▼</span>
                </th>
                <th id="sort-acquisition" class="sortable">
                  Acquisition Price
                  <span class="sort-icon" data-key="acquisitionPrice">▲▼</span>
                </th>
                <th id="supplier">Supplier</th>
                <th id="sort-quantity" class="sortable">
                  Quantity <span class="sort-icon" data-key="quantity">▲▼</span>
                </th>
                <th>Description</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="inventory-body">
              <!-- Product rows will be dynamically inserted here -->
            </tbody>
          </table>
        </section>
        <!-- Pagination Controls -->
        <div id="pagination" class="pagination">
          <!-- Buttons will be dynamically inserted here -->
        </div>
      </div>
    </main>

    <!-- Update Product Modal -->
    <div id="update-product-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="close-update-product">&times;</span>
        <h2>Update Product</h2>
        <form id="update-product-form" enctype="multipart/form-data">
          <input type="text" id="update-sku" placeholder="SKU" required />
          <input
            type="text"
            id="update-name"
            placeholder="Product Name"
            required
          />
          <select id="update-category" required>
            <option value="">Select Category</option>
          </select>

          <input
            type="number"
            id="update-price"
            placeholder="Selling Price"
            min="0"
            step="0.01"
            required
          />
          <input
            type="number"
            id="update-acquisition"
            placeholder="Acquisition Price"
            min="0"
            step="0.01"
            required
          />
          <textarea
            id="update-description"
            placeholder="Description"
            required
          ></textarea>

          <label
            for="update-img-file"
            style="margin-bottom: 0.5rem; display: block"
            >Upload Product Image:</label
          >
          <input type="file" id="update-img-file" accept="image/*" />
          <input
            type="text"
            id="update-img-url"
            placeholder="Or Image URL (optional)"
          />

          <!-- Quantity Adjustment Section -->
          <div id="adjustment-section">
            <label for="edit-quantity-toggle">Stock Adjustment</label>
            <button type="button" id="edit-quantity-toggle">
              Edit Quantity
            </button>

            <div id="quantity-adjustment-fields" class="hidden">
              <input
                type="number"
                id="adjusted-quantity"
                placeholder="New Quantity"
              />
              <select id="adjustment-reason" disabled>
                <option value="">Select Reason</option>
              </select>
              <textarea
                id="adjustment-note"
                placeholder="Note (optional remarks)"
              ></textarea>
            </div>
          </div>

          <input
            type="number"
            id="update-low-threshold"
            placeholder="Low Stock Threshold"
            min="0"
          />

          <button type="submit">Save Changes</button>
        </form>
      </div>
    </div>

    <!-- Order Product Modal -->
    <div id="order-product-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="close-order-product">&times;</span>
        <h2>Order Products</h2>

        <form id="order-product-form">
          <!-- Supplier Name -->
          <div id="order-supplier-container">
            <select id="order-supplier-name" required>
              <option value="">Select Supplier</option>
              <!-- Existing suppliers will be populated here -->
            </select>
            <input
              type="text"
              id="custom-supplier-input"
              placeholder="Enter new supplier"
              style="display: none"
            />
          </div>

          <!-- Expected Delivery -->
          <input type="date" id="order-expected-delivery" required />

          <!-- Products Table -->
          <table id="order-products-table">
            <thead>
              <tr>
                <th>
                  <input type="checkbox" id="select-all-order-products" />
                </th>
                <th>Product Name</th>
                <th>Quantity</th>
                <th>ORDER QUANTITY</th>
                <th>AQUISITION</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <button type="submit" id="submit-multi-order">Place Order</button>
        </form>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-left">
          <h2 class="footer-brand">DA Constance Fluff 'N Stuff</h2>
          <p class="footer-subtitle">Pet Supplies Store</p>
          <p>Established 2023</p>
        </div>
        <div class="footer-right">
          <ul>
            <li>
              <i class="fa-brands fa-instagram"></i>
              <a
                href="https://www.instagram.com/fluffnstuffbydaconstance/"
                target="_blank"
                >@fluffnstuffbydaconstance</a
              >
            </li>
            <li>
              <i class="fa-regular fa-envelope"></i>
              <a href="mailto:srjdee@gmail.com">srjdee@gmail.com</a>
            </li>
            <li>
              <i class="fa-solid fa-dog"></i> Pedigree Profile:
              <a
                href="https://iagd-centralized.metaanimals.org/all-animal/dior-2/"
                target="_blank"
                ><em>IAGD Record</em></a
              >
            </li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; 2023 DA Constance Fluff 'N Stuff Pet Supplies Store. All rights
          reserved.
        </p>
      </div>
    </footer>
  </body>
</html>
